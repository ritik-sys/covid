<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <link rel="icon" href="https://img.icons8.com/color/48/000000/coronavirus.png">
  <title>Covid-19 Tracker</title>
  <!-- css  -->
  <link rel="stylesheet" href="/css/styles.css">
  <!-- googlefonts cdn -->
<link href="https://fonts.googleapis.com/css2?family=Ubuntu&display=swap" rel="stylesheet">
  <!-- bootstrapcdn -->

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <!-- font Awesome cdn -->
  <script src="https://kit.fontawesome.com/d2fbf043df.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.bundle.js" charset="utf-8" ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.js" charset="utf-8"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0" ></script>
    <script>
    $(document).ready(function(){
        $("#myModal").modal('show');
    });
</script>







</head>

<body>
<button onclick="topFunction()" id="myBtn" title="Go to top"><i class="fas fa-arrow-up"></i></button>


  <!-- navbar -->
  <!-- Button trigger modal -->

    <section id="navbar">
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="/" style="font-size:2rem;"><div class="top-title">C<i class="fas fa-virus"></i>VID-19 Tracker</div></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item active">
              <a class="nav-link" href="/"><i class="fas fa-chart-line"></i>Dashboard</a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="/india"><i class="fas fa-home"></i>India</a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="/about"><i class="fas fa-user-friends"></i>About Us</a>
            </li>
          </ul>
        </div>
      </nav>
    </section>







<section id="top">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-12 col-sm-12">
              <h3 class="top-heading">Coronavirus cases - Global</h3>
            <span style="color:grey;">Last updated: <%=forindia.Date%></span>
            <div class="row">
          <div class="col-lg-4 col-md-4 col-sm-12">
            <div class="card"  style="max-width: 18rem;border-left: 5px solid #4e73df;">

                <h5 class="card-title"><strong>CONFIRMED</strong></h5>
                <p><%=global_top_card_data.cases%><sup>[+<%=global_top_card_data.todayCases%>]</sup></p>

            </div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-12">
            <div class="card" style="max-width: 18rem;border-left:5px solid #1cc88a;">

                <h5 class="card-title"><strong>RECOVERED</strong></h5>
                <p><%=global_top_card_data.recovered%></p>

          </div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-12">
            <div class="card" style="max-width: 18rem;border-left:5px solid #e74a3b;">

                <h5 class="card-title"><strong>DEATHS</strong></h5>
                <p><%=global_top_card_data.deaths%><sup>[+<%=global_top_card_data.todayDeaths%>]</sup></p>

            </div>
          </div>
        </div>
            <h3 class="mt-4"> Coronavirus cases - India <button class="btn btn-danger" type="submit"><a href="/india" style="decoration:none;color:white;">VIEW MORE</a></button></h3>
              <span style="color:grey;">Last updated: <%=forindia.Date%></span>

        <div class="row">
          <div class="col-lg-4 col-md-4 col-sm-12">
            <div class="card" style="max-width: 18rem;border-left: 5px solid #4e73df;">

                <h5 class="card-title"><strong>CONFIRMED</strong></h5>
                <p><%=india_top_card_data_new.confirmed%></p>

            </div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-12">
            <div class="card" style="max-width: 18rem;border-left:5px solid #1cc88a;">

                <h5 class="card-title"><strong>RECOVERED</strong></h5>
                <p><%=india_top_card_data_new.recovered%></p>

          </div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-12" >
            <div class="card" style="max-width: 18rem;border-left:5px solid #e74a3b;">

                <h5 class="card-title"><strong>DEATHS</strong></h5>
                <p><%=india_top_card_data_new.deaths%></p>

            </div>
          </div>
        </div>

      </div>


      <div class="col-lg-4 col-md-12 col-sm-12">
        <br>
        <center>
          <h3 style="padding:2%">Global-Effects of Covid-19</h3>
        </center>
          <div class="card" style="max-width: auto;border-left:5px solid blue;">
            <div class="card-body">
              <canvas id="myChart" width=auto; height=260px;></canvas>
            </div>
          </div>
        </div>
    </div>
  </div>
</section>

<section id="tabled" style="margin-top:5%;">
  <div class="container">
    <div class="row">
        <div class="col-lg-6">
          <center>
          <h3 style="padding:2%">Country-Wise Cases Table</h3>
          </center>
        <div class="card" style="width: auto;border-left:5px solid #e74a3b;" id="cards">
              <div class="country-table table-responsive">
                <table class="table table-striped table-bordered" id="myTable2" style="max-height: 550px; overflow: auto; display: inline-block;">
                <thead>
                  <tr>
                    <th scope="col">Country</th>
                    <th scope="col">Total</th>
                    <th scope="col">Active_Cases</th>
                    <th scope="col">Recovered</th>
                    <th scope="col">Deaths</th>
                  </tr>
                </thead>
                <tbody>
              <%  india_top_card_data.forEach(function(country){ %>
                  <tr>
                    <td><%=country.Country%></td>
                    <td onclick="sortTable(1)" name="Total"><%=country.TotalConfirmed%></td>
                    <td><%=country.TotalConfirmed-country.TotalRecovered%></td>
                    <td><%=country.TotalRecovered%></td>
                    <td><%=country.TotalDeaths%></td>
                  </tr>
              <%  })%>
                </tbody>
                </table>
              </div>

        </div>
      </div>
        <div class="col-lg-6">
            <center>
            <h3 style="padding:2%">Pie Chat For Most Affected Countries</h3>
            </center>
          <div class="card" style="width:auto;border-left:5px solid #1cc88a;" id="cards">
            <div class="card-body">
              <canvas id="myChart2" width=auto; height=305px;></canvas>
            </div>
          </div>
        </div>

      </div>

    </div>
</section>


  <div class="container">
    <section id="bargraph">
    <h2  style="text-align:center;margin-top:5%;margin-bottom:2%;">Bar Graph of Top 10 COVID struck Countries</h2>
    <div class="container">
      <div class="card shadow" style="border-left:5px solid #e74a3b;" id="cards" >
              <canvas id="myChart3" height="500" width="500"></canvas>
        </div>
      </div>
    </div>
    </section>
  </div>




<div class="container">
      <section id="perMillionCases">
        <h2 style="text-align:center;margin-top:5%;margin-bottom:2%;">Tests conducted per million population - Country wise</h2>
          <div class="card shadow" style="border-left:5px solid rgba(255, 206, 86, 0.8);" id="cards">
            <canvas id="myChart4"  height="500" width="500"></canvas>
          </div>
      </section>
</div>

<!-- timeline cases -->
<section id="timeline">
      <h2 style="text-align:center;margin-top:5%;margin-bottom:2%;">Global Timeline Of COVID-19</h2>
  <div class="container">
    <div class="card shadow" style="border-left:5px solid red;" id="cards">
        <canvas id="myChart5" height="500" width="500"></canvas>
    </div>

  </div>
</section>


<div class="attribution">
  <p style="padding-top:10px;">Made with ‚ù§ by <strong>SteveRogers</strong> and <strong>Ritik</strong></p>
</div>









  <script >

  var ctx = document.getElementById("myChart3").getContext("2d");
var data = {
  labels: [<%for(var i=0;i<10;i++){%>
      "<%=bar_name[i].Country%>",
    <%}%>
  ],
    datasets: [
        {
            label: "Confirmed",
            backgroundColor: 'rgba(255, 206, 86, 0.8)',
            data: [<%=bar_confirm%>]
        },
        {
            label: "Recovered",
            backgroundColor: "#1cc88a",
            data: [<%=bar_recover%>]
        },
        {
            label: "Deaths",
            backgroundColor: 'rgba(255, 99, 132, 0.8)',
            data: [<%=bar_death%>]
        }
    ]
};

var myBarChart = new Chart(ctx, {
    type: 'bar',
    data: data,
    options: {


        responsive: true, // Instruct chart js to respond nicely.
        maintainAspectRatio: false, // Add to prevent default behaviour of full-width/height

        barValueSpacing: 20,
        scales: {
            yAxes: [{
                ticks: {
                    min: 0,
                }
            }]
        }
    }
});


  </script>

<script >
var plot = [];
var ctx = document.getElementById('myChart2');
<%for(var i=0;i<5;i++){%>
   plot.push(<%=piedata[i].TotalConfirmed%>)
<%}%>
console.log(plot);
var myChart = new Chart(ctx, {
    type: 'doughnut',
    data: {
        labels: [<%for(var i=0;i<5;i++){%>
        "<%=piedata[i].Country%>",
      <%  }%>
      ],
        datasets: [{
            data: plot,
            backgroundColor: [
                'rgba(255, 99, 132, 0.8)',
                'rgba(54, 162, 235, 0.8)',
                'rgba(255, 206, 86, 0.8)',
                'rgba(75, 192, 192, 0.8)',
                'rgba(153, 102, 255, 0.8)',
            ],
            borderColor: [
                'rgba(255, 255, 255, 1)',
                'rgba(255, 255, 255, 1)',
                'rgba(255, 255, 255, 1)',
                'rgba(255, 255, 255, 1)',
                'rgba(255, 255, 255, 1)',
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        }
    }
});

</script>


<script>

  var ctx = document.getElementById("myChart").getContext('2d');
  var myChart = new Chart(ctx, {
  type: 'pie',
  data: {
    labels: ["Confirmed", "Recovered", "Deaths"],
    datasets: [{
      backgroundColor: [
        'rgba(255, 99, 132, 0.8)',
        'rgba(54, 162, 235, 0.8)',
        'rgba(255, 206, 86, 0.8)'
      ],
      data: [<%=global_top_card_data.cases%>,<%=global_top_card_data.recovered%>,<%=global_top_card_data.deaths%>]
    }]
  }
});


</script>

<script >

new Chart(document.getElementById("myChart4"), {
    type: 'bar',
    data: {
      labels: [<%for(var i=1;i<11;i++){%>
        "<%=perMillionCasesCountry[i]%>",
        <%}%>
      ],
      datasets: [{
          label: "Cases Per Million",
          type: "line",
          borderColor: "rgba(153, 102, 255, 0.8)",
          data: [
            <%for(var i=1;i<11;i++){%>
              <%=perMillionCases[i].casesPerOneMillion%>,
              <%}%>
          ],
         fill: false
        }, {
          label: "Tests Per Million",
          type: "bar",
          backgroundColor: "rgba(0,0,0,0.7)",
          data: [<%for(var i=1;i<11;i++){%>
            <%=perMillionCases[i].testsPerOneMillion%>,
            <%}%>],
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      title: {
        display: true,
        text: 'Test Conducted per Million VS Cases Per Million'
      },
      legend: { display: false },
      layout: {
        padding: {
          left: 10,
          right: 10
        }
      }
    }
});

 </script>
 <!-- timeline chart -->
<script>
var ctx = document.getElementById("myChart5").getContext('2d');

var myChart = new Chart(ctx, {
type: 'line',
data: {
    labels: [<%for(var key in timeline.cases){%>
      "<%=key%>",
      <%}%>],
    datasets: [{
        label: 'Confirmed', // Name the series
        data: [<%for (var key in timeline.cases) {%>
          <%=timeline.cases[key]%>,
        <%}%>
        ], // Specify the data values array
        fill: false,
        borderColor: '#2196f3', // Add custom color border (Line)
        backgroundColor: '#2196f3', // Add custom color background (Points and Fill)
        borderWidth: 1 // Specify bar border width
    },
    {
      label: 'Recovered', // Name the series
      data: [<%for (var key in timeline.recovered) {%>
        <%=timeline.recovered[key]%>,
      <%}%>], // Specify the data values arraya
      fill: false,
      borderColor: '#4CAF50', // Add custom color border (Line)
      backgroundColor: '#4CAF50', // Add custom color background (Points and Fill)
      borderWidth: 1 // Specify bar border width
    },
    {
      label: 'Deaths', // Name the series
      data: [<%for (var key in timeline.deaths) {%>
        <%=timeline.deaths[key]%>,
      <%}%>], // Specify the data values array
      fill: false,
      borderColor: 'red', // Add custom color border (Line)
      backgroundColor: 'red', // Add custom color background (Points and Fill)
      borderWidth: 1 // Specify bar border width
    }]
},
options: {

  responsive: true, // Instruct chart js to respond nicely.
  maintainAspectRatio: false, // Add to prevent default behaviour of full-width/height
}
});
</script>
<script>
//Get the button:
mybutton = document.getElementById("myBtn");

// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
  document.body.scrollTop = 0; // For Safari
  document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
}
</script>

<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

  <!-- piechart -->

</body>

</html>
